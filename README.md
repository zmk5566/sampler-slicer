# å•†å‘¨ç¼–é“™é‡‡æ ·å™¨ (Sampler-Slicer)

ä¸€ä¸ªä¸“ä¸ºä¸­å›½å¤ä»£æ‰“å‡»ä¹å™¨è®¾è®¡çš„æ™ºèƒ½é‡‡æ ·å™¨ï¼Œä¸“æ³¨äºå•†å‘¨æ—¶æœŸç¼–é“™éŸ³è‰²çš„é‡‡é›†ã€åˆ†æå’Œé‡ç°ã€‚

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ—¨åœ¨æ„å»ºä¸€ä¸ªå®Œæ•´çš„é‡‡æ ·å™¨ç³»ç»Ÿï¼Œèƒ½å¤Ÿï¼š

- ğŸµ **è‡ªåŠ¨éŸ³é¢‘åˆ‡å‰²**: ä½¿ç”¨onset detectionæŠ€æœ¯è‡ªåŠ¨è¯†åˆ«å’Œåˆ†å‰²éŸ³é¢‘ä¸­çš„å•ä¸ªæ‰“å‡»å£°éŸ³
- ğŸ·ï¸ **æ™ºèƒ½æ ‡æ³¨**: è‡ªåŠ¨åˆ†æéŸ³é«˜ã€åŠ›åº¦å’ŒéŸ³è‰²ç‰¹å¾
- ğŸ¹ **æ™ºèƒ½æ’­æ”¾**: æ”¯æŒç›¸ä¼¼åº¦åŒ¹é…å’Œéšæœºæ¨¡å¼çš„é‡‡æ ·æ’­æ”¾
- ğŸ”„ **éŸ³é«˜å˜æ¢**: ä¸ºæ¯ä¸ªæ ·æœ¬ç”Ÿæˆ-12åˆ°+12åŠéŸ³çš„æ‰€æœ‰å˜ä½“
- ğŸšï¸ **å®æ—¶æ§åˆ¶**: æä¾›éŸ³åºå™¨åŠŸèƒ½ï¼Œæ”¯æŒMIDIæ§åˆ¶

## æŠ€æœ¯ç‰¹è‰²

- **MIRç®—æ³•**: é›†æˆéŸ³ä¹ä¿¡æ¯æ£€ç´¢æŠ€æœ¯è¿›è¡ŒéŸ³é¢‘åˆ†æ
- **Pythonç”Ÿæ€**: åŸºäºlibrosaã€numpyç­‰æˆç†ŸéŸ³é¢‘å¤„ç†åº“
- **å…ƒæ•°æ®é©±åŠ¨**: å®Œæ•´çš„æ ·æœ¬ç‰¹å¾æ•°æ®åº“
- **æ’ä»¶å…¼å®¹**: æœªæ¥æ”¯æŒVST/AUæ’ä»¶æ ¼å¼

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- librosa >= 0.9.0
- numpy >= 1.21.0
- soundfile >= 0.10.0
- scipy >= 1.7.0

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/zmk5566/sampler-slicer.git
cd sampler-slicer

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### åŸºæœ¬ä½¿ç”¨

```python
from src.preprocessing import OnsetDetector, PitchAnalyzer
from src.sampler import SamplerEngine

# 1. éŸ³é¢‘é¢„å¤„ç†
detector = OnsetDetector()
samples = detector.slice_audio("samples/ç¼–é“™/biannao-æ­£é¼“éŸ³.wav")

# 2. ç‰¹å¾åˆ†æ
analyzer = PitchAnalyzer()
metadata = analyzer.analyze_samples(samples)

# 3. åˆ›å»ºé‡‡æ ·å™¨
sampler = SamplerEngine()
sampler.load_samples(metadata)

# 4. æ’­æ”¾æ ·æœ¬
sampler.play_note(pitch=220, velocity=80, mode="similarity")
```

## é¡¹ç›®ç»“æ„

```
sampler-slicer/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ preprocessing/      # éŸ³é¢‘é¢„å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“ç®¡ç†
â”‚   â””â”€â”€ sampler/           # é‡‡æ ·å™¨å¼•æ“
â”œâ”€â”€ samples/               # åŸå§‹éŸ³é¢‘æ ·æœ¬
â”œâ”€â”€ processed_samples/     # å¤„ç†åçš„æ ·æœ¬
â”œâ”€â”€ metadata/             # å…ƒæ•°æ®å­˜å‚¨
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â””â”€â”€ tests/                # æµ‹è¯•ç”¨ä¾‹
```

## æ”¯æŒçš„ä¹å™¨ç±»å‹

- **ç¼–é“™** (Biannao): å•†å‘¨æ—¶æœŸé’é“œç¼–é’Ÿç±»ä¹å™¨
  - æ­£é¼“éŸ³: ä¸»è¦æ•²å‡»éŸ³è‰²
  - ä¾§é¼“éŸ³: ä¾§é¢æ•²å‡»éŸ³è‰²

## æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„](ARCHITECTURE.md) - è¯¦ç»†çš„ç³»ç»Ÿè®¾è®¡è¯´æ˜
- [APIæ–‡æ¡£](API.md) - æ¨¡å—æ¥å£è¯´æ˜
- [å…ƒæ•°æ®è§„èŒƒ](METADATA_SPEC.md) - æ•°æ®æ ¼å¼å®šä¹‰
- [å¼€å‘æŒ‡å—](DEVELOPMENT.md) - å¼€å‘ç¯å¢ƒé…ç½®å’Œè´¡çŒ®æŒ‡å—
- [éƒ¨ç½²æŒ‡å—](DEPLOYMENT.md) - æ’ä»¶æ‰“åŒ…å’Œéƒ¨ç½²è¯´æ˜

## å¼€å‘çŠ¶æ€

- [x] é¡¹ç›®æ¶æ„è®¾è®¡
- [x] æ–‡æ¡£ç¼–å†™
- [ ] éŸ³é¢‘é¢„å¤„ç†æ¨¡å—
- [ ] ç‰¹å¾åˆ†æç®—æ³•
- [ ] é‡‡æ ·å™¨å¼•æ“
- [ ] ç”¨æˆ·ç•Œé¢
- [ ] VST/AUæ’ä»¶

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡GitHub Issuesè”ç³»ã€‚
